# 配置文件说明

## settings.json 配置

项目使用 `settings.json` 文件存储配置信息。

### 方式1: 使用 settings.json（推荐）

复制示例文件并编辑：

```bash
copy settings.json.example settings.json
```

然后编辑 `settings.json` 填入你的实际值。

### 方式2: 使用环境变量（可选）

如果你更喜欢使用环境变量，可以：

1. 复制 `.env.example` 为 `.env`
2. 编辑 `.env` 填入你的值
3. 修改代码读取环境变量（需要额外开发）

## 配置项说明

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `clienttype` | 数字 | 客户端类型，固定为70 | `70` |
| `bdstoken` | 字符串 | 百度令牌，从网络请求中获取 | `"27dd3eb...ead6"` |
| `need_thumbnail` | 数字 | 是否需要缩略图 (0/1) | `1` |
| `need_filter_hidden` | 数字 | 是否过滤隐藏文件 (0/1) | `0` |
| `filter_date` | 字符串 | 日期过滤，格式YYYY-MM-DD，留空不过滤 | `"2025-01-01"` 或 `""` |
| `date_mode` | 字符串 | before=之前, after=之后 | `"before"` |
| `Cookie` | 字符串 | 完整的Cookie字符串 | `"MAWEBCUID=...sig=..."` |

## 获取配置值

### 1. 获取 bdstoken 和 Cookie

1. 打开百度一刻相册网页版
2. 按 F12 打开开发者工具
3. 切换到"网络"(Network)标签
4. 点击"Fetch/XHR"筛选
5. 在相册中随便点击操作，找到 `list?clienttype=70...` 请求
6. 在"标头"(Headers)中：
   - 找到"Cookie"，复制完整值
   - 在"负载"(Payload)中找到"bdstoken"，复制其值

### 2. 日期过滤配置（可选）

如果想只下载特定日期范围的照片：

```json
{
    "filter_date": "2025-01-01",
    "date_mode": "before"
}
```

- 留空 `filter_date` 表示下载所有照片
- `date_mode` 为 `before` 表示下载该日期之前的
- `date_mode` 为 `after` 表示下载该日期之后的

## 安全提示

⚠️ **重要**: 
- `settings.json` 和 `.env` 包含敏感信息，已加入 `.gitignore`
- **切勿**将真实的配置文件提交到Git仓库
- **切勿**将Cookie分享给他人
- Cookie有时效性，失效后需要重新获取

## 示例配置

完整的 `settings.json` 示例：

```json
{
    "clienttype": 70,
    "bdstoken": "27dd3eb54f19bc77fb4881bfb84dead6",
    "need_thumbnail": 1,
    "need_filter_hidden": 0,
    "filter_date": "",
    "date_mode": "before",
    "Cookie": "MAWEBCUID=web_xxx; BAIDUID=xxx; ..."
}
```
