# 日期过滤功能使用说明

## 功能说明

现在支持按日期过滤照片，可以只下载指定日期之前或之后的照片。

## 配置方法

在 `settings.json` 中添加以下两个字段：

```json
{
    "clienttype": 70,
    "bdstoken": "your_token",
    "need_thumbnail": 1,
    "need_filter_hidden": 0,
    "filter_date": "2024-01-01",
    "date_mode": "before",
    "Cookie": "your_cookie"
}
```

### 配置参数说明

#### `filter_date`
- **格式**: `YYYY-MM-DD`（例如：`2024-01-01`）
- **说明**: 指定要过滤的日期
- **留空**: 如果设置为 `""`（空字符串），则不启用日期过滤，下载所有照片

#### `date_mode`
- **值**: `before` 或 `after`
- **说明**: 
  - `before`: 只获取指定日期**之前**的照片（不包括当天）
  - `after`: 只获取指定日期**之后**的照片（不包括当天）
- **默认值**: `before`

## 使用示例

### 示例1：只下载 2024年1月1日之前的照片
```json
{
    "filter_date": "2024-01-01",
    "date_mode": "before"
}
```

### 示例2：只下载 2023年12月31日之后的照片
```json
{
    "filter_date": "2023-12-31",
    "date_mode": "after"
}
```

### 示例3：下载所有照片（不过滤）
```json
{
    "filter_date": "",
    "date_mode": "before"
}
```

## 运行效果

启用日期过滤后，运行 `python photographListDownload.py` 会显示：

```
日期过滤已启用: 只获取 2024-01-01 之前 的照片
开始获取照片元数据...
获取到 50 张照片，累计: 30

✓ 元数据获取完成！共获取 30 张照片的信息，跳过 20 张
```

- **获取的照片数**: 符合日期条件的照片
- **跳过的照片数**: 不符合日期条件的照片

## 注意事项

1. 日期格式必须严格按照 `YYYY-MM-DD` 格式，否则会忽略日期过滤
2. 过滤是基于照片的拍摄日期（`extra_info.date_time`）
3. 如果照片元数据中没有日期信息，该照片会被保存（不会被过滤）
4. 先运行 `photographListDownload.py` 获取元数据，再运行 `photographDownload.py` 下载

## 常见使用场景

### 场景1：备份2023年之前的旧照片
```json
"filter_date": "2024-01-01",
"date_mode": "before"
```

### 场景2：只下载最近的照片
```json
"filter_date": "2024-06-01",
"date_mode": "after"
```

### 场景3：分批下载（避免一次下载太多）
第一次：
```json
"filter_date": "2023-01-01",
"date_mode": "before"
```

第二次：
```json
"filter_date": "2023-01-01",
"date_mode": "after"
```
